<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Ajax上传文件</title>
    <script src="jquery-3.6.0.min.js"></script>
</head>

<body>
    <label for="username">用户名：</label>
    <input id="username" type="text" onkeydown="console.log(this.value)"><br>
    用户图像：<input id="userface" type="file" onchange="preview(this)"><br>
    <div id="preview"></div>
    <input type="button" id="btnClick" value="上传">
    <script>
        $("#btnClick").click(function () {
            let formData = new FormData();
            formData.append("username", $("#username").val());
            formData.append("file", $("#userface")[0].files[0]);
            $.ajax({
                url: '/fileupload',
                type: 'post',
                data: formData,
                processData: false,
                contentType: false,
                success: function (msg) {
                    alert(msg);
                }
            });
        });

        function preview(file) {
            let prevDiv = document.getElementById('preview');
            if (file.files && file.files[0]) {
                let reader = new FileReader();
                reader.onload = function (evt) {
                    prevDiv.innerHTML = '<img src="' + evt.target.result + '" />';
                }
                reader.readAsDataURL(file.files[0]);
            } else {
                prevDiv.innerHTML = '<div class="img" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src=\'' + file.value + '\'"></div>';
            }
        }
    </script>
    
</body>

</html> -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes"
    />
    <link rel="stylesheet" href="styles/Template.css" />
    <link rel="icon" href="img/bili.ico" />
    <title>Temp</title>
  </head>

  <body>
    <div>
      <table id="grid">
        <thead>
          <tr>
            <th data-type="number">Age</th>
            <th data-type="string">Name</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>5</td>
            <td>John</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Pete</td>
          </tr>
          <tr>
            <td>12</td>
            <td>Ann</td>
          </tr>
          <tr>
            <td>9</td>
            <td>Eugene</td>
          </tr>
          <tr>
            <td>1</td>
            <td>Ilya</td>
          </tr>
        </tbody>
      </table>

      <script>
        grid.onclick = function (e) {
          if (e.target.tagName != "TH") return;
          let th = e.target;
          // if TH, then sort
          // cellIndex is the number of th:
          //   0 for the first column
          //   1 for the second column, etc
          sortGrid(th.cellIndex, th.dataset.type);
        };

        function sortGrid(colNum, type) {
          let tbody = grid.querySelector("tbody");
          let rowsArray = Array.from(tbody.rows);
          // compare(a, b) compares two rows, need for sorting
          let compare;

          switch (type) {
            case "number":
              compare = function (rowA, rowB) {
                return (
                  rowA.cells[colNum].innerHTML - rowB.cells[colNum].innerHTML
                );
              };
              break;
            case "string":
              compare = function (rowA, rowB) {
                return (
                  rowA.cells[colNum].innerHTML > rowB.cells[colNum].innerHTML
                );
              };
              break;
          }

          // sort
          rowsArray.sort(compare);
          tbody.append(...rowsArray);
        }
      </script>
    </div>

    <div>
      <style>
        .selected {
          background: rgb(174, 248, 174);
        }

        li {
          cursor: pointer;
        }
      </style>

      Click on a list item to select it.
      <br />

      <ul id="ul">
        <li>Christopher Robin</li>
        <li>Winnie-the-Pooh</li>
        <li>Tigger</li>
        <li>Kanga</li>
        <li>Rabbit. Just rabbit.</li>
      </ul>

      <script>
        ul.onclick = function (event) {
          if (event.target.tagName != "LI") return;
          if (event.ctrlKey || event.metaKey) toggleSelect(event.target);
          else singleSelect(event.target);
          console.log(event.target);
        };

        ul.onmousedown = function () {
          return false;
        };
        function toggleSelect(li) {
          li.classList.toggle("selected");
        }
        function singleSelect(li) {
          let selected = ul.querySelectorAll(".selected");
          for (let elem of selected) elem.classList.remove("selected");

          li.classList.add("selected");
        }
      </script>
    </div>

    <div>
      <style>
        .container {
          width: 30%;
          margin: 3em;
          overflow: hidden;
          position: relative;
        }
        .father {
          overflow: auto;
          scrollbar-width: none;
          height: 200px;
        }
        .father::-webkit-scrollbar {
          display: none;
        }
        .vertical-scroll {
          position: absolute;
          right: 0;
          top: 0;
          background-color: #f5f5f5;
          height: 100%;
          width: 12px;
          border-radius: 10px;
        }
        .rail {
          background-color: #ccc;
          border-radius: 10px;
          cursor: pointer;
          -webkit-transition: background-color 0.3s;
          transition: background-color 0.3s;
        }
      </style>
      <div class="container">
        <div class="father">
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>111</div>
          <div>1221</div>
          <div>1221</div>
          <div>1221</div>
        </div>
        <div class="vertical-scroll">
          <div class="rail"></div>
        </div>
      </div>
      <script>
        let fatherScrollHeight, fatherClientHeight; // 父高度,滚动高度
        let warp = document.querySelector(".father");
        fatherClientHeight = warp.clientHeight; // 获取父高度
        fatherScrollHeight = warp.scrollHeight; // 获取父可滚动高度
        let present = fatherClientHeight / fatherScrollHeight; // 计算滚动条应该占多高
        let scrollWarp = document.querySelector(".rail");
        scrollWarp.style.height = present * 100 + "%"; // 用百分比计算rail的高度
        warp.addEventListener("scroll", function (e) {
          scrollWarp.style.transform =
            "translateY(" +
            (e.target.scrollTop * 100) / fatherClientHeight +
            "%)";
        });
      </script>
    </div>
  </body>
</html>
