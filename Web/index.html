<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes"
    />
    <script src=""></script>
    <link rel="stylesheet" href="styles/Template.css" />
    <link rel="icon" href="img/bili.ico" />
    <title>Web</title>
    <style type="text/css">
      #pagiDiv span {
        border-radius: 0.2em;
        padding: 5px;
      }
    </style>
    <script type="text/javascript">
      //全局变量
      var numCount; //数据总数量
      var columnsCounts; //数据列数量
      var pageCount; //每页显示的数量
      var pageNum; //总页数
      var currPageNum; //当前页数

      //页面标签变量
      var blockTable;
      var preSpan;
      var firstSpan;
      var nextSpan;
      var lastSpan;
      var pageNumSpan;
      var currPageSpan;

      window.onload = function () {
        //页面标签变量
        blockTable = document.getElementById("blocks");
        preSpan = document.getElementById("spanPre");
        firstSpan = document.getElementById("spanFirst");
        nextSpan = document.getElementById("spanNext");
        lastSpan = document.getElementById("spanLast");
        pageNumSpan = document.getElementById("spanTotalPage");
        currPageSpan = document.getElementById("spanPageNum");

        numCount = blockTable.rows.length - 1; //取table的行数作为数据总数量（减去标题行1）

        columnsCounts = blockTable.rows[0].cells.length;
        pageCount = 5;
        pageNum = Math.ceil(numCount / pageCount);

        firstPage();
      };
    </script>
  </head>

  <body style="position: relative; height: 100vh">
    <div class="container" align="center">
      <h2 align="center">Recent blocks Found By AntPool</h2>

      <table id="blocks" class="table table-striped" style="margin-top: 25px">
        <thead>
          <tr>
            <th>序号</th>
            <th>课程</th>
            <th>学分</th>
            <th>类别</th>
            <th>成绩</th>
            <th>取得学分</th>
            <th>绩点</th>
            <th>备注</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
          <tr>
            <td>1</td>
            <td>[101] 面向对象程序设计</td>
            <td>4.0</td>
            <td>必修课</td>
            <td>90.0</td>
            <td>4.0</td>
            <td>4.3</td>
            <td></td>
          </tr>
        </tbody>
      </table>

      <div
        id="pagiDiv"
        align="right"
        style="position: absolute; bottom: 300px; left: 450px"
      >
        <span id="spanFirst">First</span>
        <span id="spanPre">Pre</span>
        <span id="spanNext">Next</span>
        <span id="spanLast">Last</span>
        The<span id="spanPageNum"></span>Page / Total
        <span id="spanTotalPage"></span>Page
      </div>
    </div>

    <script>
      function firstPage() {
        hide();
        currPageNum = 1;
        showCurrPage(currPageNum);
        showTotalPage();
        for (i = 1; i < pageCount + 1; i++) {
          blockTable.rows[i].style.display = "";
        }

        firstText();
        preText();
        nextLink();
        lastLink();
      }

      function prePage() {
        hide();
        currPageNum--;
        showCurrPage(currPageNum);
        showTotalPage();
        var firstR = firstRow(currPageNum);
        var lastR = lastRow(firstR);
        for (i = firstR; i < lastR; i++) {
          blockTable.rows[i].style.display = "";
        }

        if (1 == currPageNum) {
          firstText();
          preText();
          nextLink();
          lastLink();
        } else if (pageNum == currPageNum) {
          preLink();
          firstLink();
          nextText();
          lastText();
        } else {
          firstLink();
          preLink();
          nextLink();
          lastLink();
        }
      }

      function nextPage() {
        hide();
        currPageNum++;
        showCurrPage(currPageNum);
        showTotalPage();
        var firstR = firstRow(currPageNum);
        var lastR = lastRow(firstR);
        for (i = firstR; i < lastR; i++) {
          blockTable.rows[i].style.display = "";
        }

        if (1 == currPageNum) {
          firstText();
          preText();
          nextLink();
          lastLink();
        } else if (pageNum == currPageNum) {
          preLink();
          firstLink();
          nextText();
          lastText();
        } else {
          firstLink();
          preLink();
          nextLink();
          lastLink();
        }
      }

      function lastPage() {
        hide();
        currPageNum = pageNum;
        showCurrPage(currPageNum);
        showTotalPage();
        var firstR = firstRow(currPageNum);
        for (i = firstR; i < numCount + 1; i++) {
          blockTable.rows[i].style.display = "";
        }

        firstLink();
        preLink();
        nextText();
        lastText();
      }

      // 计算将要显示的页面的首行和尾行
      function firstRow(currPageNum) {
        return pageCount * (currPageNum - 1) + 1;
      }

      function lastRow(firstRow) {
        var lastRow = firstRow + pageCount;
        if (lastRow > numCount + 1) {
          lastRow = numCount + 1;
        }
        return lastRow;
      }

      function showCurrPage(cpn) {
        currPageSpan.innerHTML = cpn;
      }

      function showTotalPage() {
        pageNumSpan.innerHTML = pageNum;
      }

      //隐藏所有行
      let hide = () => {
        for (let row of blockTable.rows) {
          row.style.display = "none";
        }
      };

      //控制首页等功能的显示与不显示
      function firstLink() {
        firstSpan.innerHTML = "<a href='javascript:firstPage();'>First</a>";
      }
      function firstText() {
        firstSpan.innerHTML = "First";
      }

      function preLink() {
        preSpan.innerHTML = "<a href='javascript:prePage();'>Pre</a>";
      }
      function preText() {
        preSpan.innerHTML = "Pre";
      }

      function nextLink() {
        nextSpan.innerHTML = "<a href='javascript:nextPage();'>Next</a>";
      }
      function nextText() {
        nextSpan.innerHTML = "Next";
      }

      function lastLink() {
        lastSpan.innerHTML = "<a href='javascript:lastPage();'>Last</a>";
      }
      function lastText() {
        lastSpan.innerHTML = "Last";
      }
    </script>
  </body>
</html>
